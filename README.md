# Appointment

This project has been generated by the lagom/lagom-scala.g8 template. 

This project was created with the intention of learning and applying all the concepts promoted by the Lagom Framework documentation.

For instructions on running and testing the project, see https://www.lagomframework.com/get-started-scala.html.

# Requirements

Currently besides downloading this project you will need to have a local kafka server running in port 9092 using an out of the box configuration.
the topic this application listens too is appointment.

# POC - How to test

Define the usual shifts available each day
curl -X GET http://localhost:9020/api/appointment/luis/generate

Note: consider that in the previous url /luis/ means the provider. I could generate a new schedule for a different provider.

Get all shifts and their respective states.
curl -X GET http://localhost:9020/api/appointment/luis  # where luis is the provider

Modify a shift, make a reservation, cancel it, set it as in progress, etc.
curl -X PUT http://localhost:9020/api/appointment/luis -H 'Content-Type: application/json' -d '{"id": XXX, "status": XXX, start: "XXX", end: "XXX", user: "XXX"}';

Example:
After running the first command in order to generate the shifts, take a look at the list returned and then you should follow these steps:

1 - Get an id. For instance, lets consider this one: 93895495-cdd8-49ff-ac5a-b83c89b38ab8
2 - For that id, see the status of that appointment. Suppose it is: Available
3 - Run this command:
curl -X PUT http://localhost:9020/api/appointment/luis -H 'Content-Type: application/json' -d '{"id": "93895495-cdd8-49ff-ac5a-b83c89b38ab8", "status": "InProgress", "user": "Martin"}'

Verifying the result
curl -X GET http://localhost:9020/api/appointment/luis

The status for that id should be InProgress.

Finally add a new shift to the schedule list

curl -X POST http://localhost:9020/api/appointment/luis -H 'Content-Type: application/json' -d '{"start": "2019-06-24 11:00", "end": "2019-06-24 11:20"}'

Verifying the result
curl -X GET http://localhost:9000/api/appointment/luis